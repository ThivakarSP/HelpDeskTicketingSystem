{"ast":null,"code":"import React from'react';import UserTicketList from'./UserTicketList';import CreateTicket from'./CreateTicket';import KnowledgeBaseView from'./KnowledgeBaseView';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserPortal=()=>{const[currentView,setCurrentView]=React.useState('dashboard');const[user,setUser]=React.useState(null);const[refreshKey,setRefreshKey]=React.useState(0);React.useEffect(()=>{const userData=localStorage.getItem('user');if(userData){setUser(JSON.parse(userData));}},[]);const handleLogout=()=>{localStorage.removeItem('user');window.location.href='/login';};const handleTicketCreated=ticket=>{// Force refresh of ticket lists by updating key\nsetRefreshKey(prev=>prev+1);// Navigate to my tickets to show the newly created ticket\nsetCurrentView('my-tickets');};const renderContent=()=>{switch(currentView){case'my-tickets':return/*#__PURE__*/_jsx(UserTicketList,{userTicketsOnly:true},\"my-tickets-\".concat(refreshKey));case'create-ticket':return/*#__PURE__*/_jsx(CreateTicket,{onSuccess:handleTicketCreated});case'all-tickets':return/*#__PURE__*/_jsx(UserTicketList,{},\"all-tickets-\".concat(refreshKey));case'knowledge-base':return/*#__PURE__*/_jsx(KnowledgeBaseView,{});default:return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"User Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Welcome, \",(user===null||user===void 0?void 0:user.username)||'User',\"!\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"Manage your support tickets and create new ones.\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(200px, 1fr))',gap:'1rem',marginTop:'2rem'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{cursor:'pointer'},onClick:()=>setCurrentView('my-tickets'),children:[/*#__PURE__*/_jsx(\"h3\",{children:\"My Tickets\"}),/*#__PURE__*/_jsx(\"p\",{children:\"View your submitted tickets\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{cursor:'pointer'},onClick:()=>setCurrentView('create-ticket'),children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Create Ticket\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Submit a new support request\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{cursor:'pointer'},onClick:()=>setCurrentView('all-tickets'),children:[/*#__PURE__*/_jsx(\"h3\",{children:\"All Tickets\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Browse all support tickets\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{cursor:'pointer'},onClick:()=>setCurrentView('knowledge-base'),children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Knowledge Base\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Browse help articles and FAQs\"})]})]})]})]});}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"nav\",{style:{backgroundColor:'#3498db',color:'white',padding:'1rem',display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Portal\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'1rem',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('dashboard'),style:{background:'none',border:'1px solid white',color:'white',padding:'0.5rem 1rem',borderRadius:'4px'},children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('my-tickets'),style:{background:'none',border:'1px solid white',color:'white',padding:'0.5rem 1rem',borderRadius:'4px'},children:\"My Tickets\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('create-ticket'),style:{background:'none',border:'1px solid white',color:'white',padding:'0.5rem 1rem',borderRadius:'4px'},children:\"Create Ticket\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('knowledge-base'),style:{background:'none',border:'1px solid white',color:'white',padding:'0.5rem 1rem',borderRadius:'4px'},children:\"Knowledge Base\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,style:{background:'#e74c3c',border:'none',color:'white',padding:'0.5rem 1rem',borderRadius:'4px'},children:\"Logout\"})]})]}),renderContent()]});};export default UserPortal;","map":{"version":3,"names":["React","UserTicketList","CreateTicket","KnowledgeBaseView","jsx","_jsx","jsxs","_jsxs","UserPortal","currentView","setCurrentView","useState","user","setUser","refreshKey","setRefreshKey","useEffect","userData","localStorage","getItem","JSON","parse","handleLogout","removeItem","window","location","href","handleTicketCreated","ticket","prev","renderContent","userTicketsOnly","concat","onSuccess","className","children","username","style","display","gridTemplateColumns","gap","marginTop","cursor","onClick","backgroundColor","color","padding","justifyContent","alignItems","background","border","borderRadius"],"sources":["D:/Helpdesk_Ticketing/98698b33-5bdf-4501-9f43-41e3e1cbf16a-628b1e05-cb12-43d5-95c0-c4c48d574d3a/reactapp/src/components/UserPortal.js"],"sourcesContent":["import React from 'react';\r\nimport UserTicketList from './UserTicketList';\r\nimport CreateTicket from './CreateTicket';\r\nimport KnowledgeBaseView from './KnowledgeBaseView';\r\n\r\nconst UserPortal = () => {\r\n  const [currentView, setCurrentView] = React.useState('dashboard');\r\n  const [user, setUser] = React.useState(null);\r\n  const [refreshKey, setRefreshKey] = React.useState(0);\r\n\r\n  React.useEffect(() => {\r\n    const userData = localStorage.getItem('user');\r\n    if (userData) {\r\n      setUser(JSON.parse(userData));\r\n    }\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('user');\r\n    window.location.href = '/login';\r\n  };\r\n\r\n  const handleTicketCreated = (ticket) => {\r\n    // Force refresh of ticket lists by updating key\r\n    setRefreshKey(prev => prev + 1);\r\n    // Navigate to my tickets to show the newly created ticket\r\n    setCurrentView('my-tickets');\r\n  };\r\n\r\n  const renderContent = () => {\r\n    switch (currentView) {\r\n      case 'my-tickets':\r\n        return <UserTicketList userTicketsOnly={true} key={`my-tickets-${refreshKey}`} />;\r\n      case 'create-ticket':\r\n        return <CreateTicket onSuccess={handleTicketCreated} />;\r\n      case 'all-tickets':\r\n        return <UserTicketList key={`all-tickets-${refreshKey}`} />;\r\n      case 'knowledge-base':\r\n        return <KnowledgeBaseView />;\r\n      default:\r\n        return (\r\n          <div className=\"container\">\r\n            <h1>User Dashboard</h1>\r\n            <div className=\"card\">\r\n              <h2>Welcome, {user?.username || 'User'}!</h2>\r\n              <p>Manage your support tickets and create new ones.</p>\r\n              <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: '1rem', marginTop: '2rem' }}>\r\n                <div className=\"card\" style={{ cursor: 'pointer' }} onClick={() => setCurrentView('my-tickets')}>\r\n                  <h3>My Tickets</h3>\r\n                  <p>View your submitted tickets</p>\r\n                </div>\r\n                <div className=\"card\" style={{ cursor: 'pointer' }} onClick={() => setCurrentView('create-ticket')}>\r\n                  <h3>Create Ticket</h3>\r\n                  <p>Submit a new support request</p>\r\n                </div>\r\n                <div className=\"card\" style={{ cursor: 'pointer' }} onClick={() => setCurrentView('all-tickets')}>\r\n                  <h3>All Tickets</h3>\r\n                  <p>Browse all support tickets</p>\r\n                </div>\r\n                <div className=\"card\" style={{ cursor: 'pointer' }} onClick={() => setCurrentView('knowledge-base')}>\r\n                  <h3>Knowledge Base</h3>\r\n                  <p>Browse help articles and FAQs</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <nav style={{ \r\n        backgroundColor: '#3498db', \r\n        color: 'white', \r\n        padding: '1rem',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center'\r\n      }}>\r\n        <h2>User Portal</h2>\r\n        <div style={{ display: 'flex', gap: '1rem', alignItems: 'center' }}>\r\n          <button \r\n            onClick={() => setCurrentView('dashboard')}\r\n            style={{ background: 'none', border: '1px solid white', color: 'white', padding: '0.5rem 1rem', borderRadius: '4px' }}\r\n          >\r\n            Dashboard\r\n          </button>\r\n          <button \r\n            onClick={() => setCurrentView('my-tickets')}\r\n            style={{ background: 'none', border: '1px solid white', color: 'white', padding: '0.5rem 1rem', borderRadius: '4px' }}\r\n          >\r\n            My Tickets\r\n          </button>\r\n          <button \r\n            onClick={() => setCurrentView('create-ticket')}\r\n            style={{ background: 'none', border: '1px solid white', color: 'white', padding: '0.5rem 1rem', borderRadius: '4px' }}\r\n          >\r\n            Create Ticket\r\n          </button>\r\n          <button \r\n            onClick={() => setCurrentView('knowledge-base')}\r\n            style={{ background: 'none', border: '1px solid white', color: 'white', padding: '0.5rem 1rem', borderRadius: '4px' }}\r\n          >\r\n            Knowledge Base\r\n          </button>\r\n          <button \r\n            onClick={handleLogout}\r\n            style={{ background: '#e74c3c', border: 'none', color: 'white', padding: '0.5rem 1rem', borderRadius: '4px' }}\r\n          >\r\n            Logout\r\n          </button>\r\n        </div>\r\n      </nav>\r\n      {renderContent()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserPortal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}