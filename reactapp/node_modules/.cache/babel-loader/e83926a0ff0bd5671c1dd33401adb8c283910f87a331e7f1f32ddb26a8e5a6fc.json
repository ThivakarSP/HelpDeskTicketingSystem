{"ast":null,"code":"import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TicketList=_ref=>{let{onViewDetails}=_ref;const[tickets,setTickets]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{fetchTickets();},[]);const fetchTickets=async()=>{try{const response=await fetch('/api/tickets');if(!response.ok){throw new Error('Failed to fetch tickets');}const data=await response.json();setTickets(data);}catch(err){setError(err.message);}finally{setLoading(false);}};const formatDate=dateString=>{return new Date(dateString).toLocaleDateString();};const getStatusClass=status=>{return\"status-badge status-\".concat(status.toLowerCase());};const getPriorityClass=priority=>{return priority?\"priority-\".concat(priority.toLowerCase()):'';};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:\"Loading tickets...\"});if(error)return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[\"Error: \",error]});return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"All Tickets\"}),tickets.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"No tickets found. \",/*#__PURE__*/_jsx(\"a\",{href:\"/create\",children:\"Create the first ticket\"})]})}):/*#__PURE__*/_jsx(\"div\",{children:tickets.map(ticket=>/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'flex-start'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{flex:1},children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 0.5rem 0'},children:ticket.title}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'0 0 1rem 0',color:'#666'},children:ticket.description}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'1rem',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"span\",{className:getStatusClass(ticket.status),children:ticket.status}),ticket.priority&&/*#__PURE__*/_jsxs(\"span\",{className:getPriorityClass(ticket.priority),children:[\"Priority: \",ticket.priority]}),ticket.category&&/*#__PURE__*/_jsxs(\"span\",{style:{color:'#666'},children:[\"Category: \",ticket.category]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'0.5rem',fontSize:'0.9rem',color:'#666'},children:[ticket.submitter?\"Submitter: \".concat(ticket.submitter.username||ticket.submitter.id):'Submitter: —',\" \\u2022 Created: \",ticket.createdAt?formatDate(ticket.createdAt):'—',ticket.assignedAgent&&/*#__PURE__*/_jsxs(_Fragment,{children:[\" \\u2022 Assigned: \",ticket.assignedAgent.username||ticket.assignedAgent.id]})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:()=>onViewDetails(ticket.id),style:{marginLeft:'1rem'},children:\"View Details\"})]})},ticket.id))})]});};export default TicketList;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TicketList","_ref","onViewDetails","tickets","setTickets","loading","setLoading","error","setError","fetchTickets","response","fetch","ok","Error","data","json","err","message","formatDate","dateString","Date","toLocaleDateString","getStatusClass","status","concat","toLowerCase","getPriorityClass","priority","className","children","length","href","map","ticket","style","display","justifyContent","alignItems","flex","margin","title","color","description","gap","category","marginTop","fontSize","submitter","username","id","createdAt","assignedAgent","onClick","marginLeft"],"sources":["D:/Helpdesk_Ticketing/98698b33-5bdf-4501-9f43-41e3e1cbf16a-628b1e05-cb12-43d5-95c0-c4c48d574d3a/reactapp/src/components/TicketList.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\nconst TicketList = ({ onViewDetails }) => {\r\n  const [tickets, setTickets] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetchTickets();\r\n  }, []);\r\n\r\n  const fetchTickets = async () => {\r\n    try {\r\n      const response = await fetch('/api/tickets');\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch tickets');\r\n      }\r\n      const data = await response.json();\r\n      setTickets(data);\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    return new Date(dateString).toLocaleDateString();\r\n  };\r\n\r\n  const getStatusClass = (status) => {\r\n    return `status-badge status-${status.toLowerCase()}`;\r\n  };\r\n\r\n  const getPriorityClass = (priority) => {\r\n    return priority ? `priority-${priority.toLowerCase()}` : '';\r\n  };\r\n\r\n  if (loading) return <div className=\"container\">Loading tickets...</div>;\r\n  if (error) return <div className=\"container\">Error: {error}</div>;\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h1>All Tickets</h1>\r\n      {tickets.length === 0 ? (\r\n        <div className=\"card\">\r\n          <p>No tickets found. <a href=\"/create\">Create the first ticket</a></p>\r\n        </div>\r\n      ) : (\r\n        <div>\r\n          {tickets.map(ticket => (\r\n            <div key={ticket.id} className=\"card\">\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\r\n                <div style={{ flex: 1 }}>\r\n                  <h3 style={{ margin: '0 0 0.5rem 0' }}>{ticket.title}</h3>\r\n                  <p style={{ margin: '0 0 1rem 0', color: '#666' }}>{ticket.description}</p>\r\n                  <div style={{ display: 'flex', gap: '1rem', alignItems: 'center' }}>\r\n                    <span className={getStatusClass(ticket.status)}>{ticket.status}</span>\r\n                    {ticket.priority && (\r\n                      <span className={getPriorityClass(ticket.priority)}>\r\n                        Priority: {ticket.priority}\r\n                      </span>\r\n                    )}\r\n                    {ticket.category && (\r\n                      <span style={{ color: '#666' }}>Category: {ticket.category}</span>\r\n                    )}\r\n                  </div>\r\n                  <div style={{ marginTop: '0.5rem', fontSize: '0.9rem', color: '#666' }}>\r\n                    {ticket.submitter ? `Submitter: ${ticket.submitter.username || ticket.submitter.id}` : 'Submitter: —'} • Created: {ticket.createdAt ? formatDate(ticket.createdAt) : '—'}\r\n                    {ticket.assignedAgent && (\r\n                      <> • Assigned: {ticket.assignedAgent.username || ticket.assignedAgent.id}</>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <button \r\n                  className=\"btn-primary\" \r\n                  onClick={() => onViewDetails(ticket.id)}\r\n                  style={{ marginLeft: '1rem' }}\r\n                >\r\n                  View Details\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TicketList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}